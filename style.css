:root{
  --roof:#ff7a00;
  --gutter:#9e9e9e;
  --water:#2196f3;
  --pillar:#222;

  --bg:#0f1115;
  --panel:#171a21;
  --panel-2:#1f2330;
  --border:#2a2f3a;
  --text:#eef1f7;
  --muted:#a0a6b5;
  --muted-2:#cdd3e0;

  --ok:#18d57b;
  --bad:#ff5364;
  --lane:#ffd54f;

  --radius:14px;
  --shadow:0 10px 30px rgba(0,0,0,.35);
}

html,body{height:100%;}
*{box-sizing:border-box;}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Inter,Arial,sans-serif;
  overflow:hidden;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

#scene{position:fixed; inset:0;}

/* ============== TOPBAR/LEGENDA ============== */
.topbar{
  position:fixed; left:16px; top:16px;
  background:linear-gradient(180deg,var(--panel),var(--panel-2));
  border:1px solid var(--border);
  padding:12px 14px;
  border-radius:var(--radius);
  pointer-events:auto;
  box-shadow:var(--shadow);
  max-width:560px;
}
.title{font-weight:700; font-size:14px; letter-spacing:.2px;}
.subtitle{font-size:12px; color:var(--muted); margin-top:4px;}
.legend{display:flex; gap:12px; margin-top:10px; flex-wrap:wrap}
.swatch{display:flex; align-items:center; gap:8px; font-size:12px; color:#d8dbe6}
.dot{width:14px; height:14px; border-radius:4px; outline:1px solid rgba(255,255,255,.12)}
.dot.roof{background:var(--roof)}
.dot.gutter{background:var(--gutter)}
.dot.water{background:var(--water)}
.dot.pillar{background:var(--pillar)}

/* ============== PAINÉIS ============== */
.panel{
  position:fixed; right:16px; top:16px; width:380px;
  background:linear-gradient(180deg,var(--panel),var(--panel-2));
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:12px;
  pointer-events:auto;
  box-shadow:var(--shadow);
}
.panel h3{margin:4px 0 8px; font-size:13px}
.row{display:flex; align-items:center; justify-content:space-between; gap:8px; margin:8px 0}
.row label{font-size:12px; color:var(--muted-2)}
.hint{font-size:11px; color:var(--muted); margin-top:8px}
.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}

/* Painel Sustentabilidade (fica no canto inferior direito) */
.panel.sustain{
  top:auto; bottom:16px; right:16px; width:420px;
}
.grid2{
  display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:10px;
}
.grid2 label{
  display:flex; flex-direction:column; gap:6px; font-size:12px; color:var(--muted-2);
}
.grid2 input, .grid2 select{
  appearance:none;
  padding:8px 10px;
  border-radius:10px;
  border:1px solid var(--border);
  background:#1b2130;
  color:#e9edf9;
  outline:none;
}
.grid2 input:focus, .grid2 select:focus{border-color:#3a71ff; box-shadow:0 0 0 2px rgba(14,97,255,.25)}
.metrics{
  display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:10px; margin-top:8px;
}
.strong{font-weight:700; font-size:14px; margin-top:2px}
.muted{color:var(--muted)}
.small{font-size:11px}

/* Details explicativo */
.blk{margin-top:10px;}
.blk summary{
  cursor:pointer; color:var(--muted-2); font-size:12px; list-style:none;
}
.blk summary::-webkit-details-marker{display:none;}
.list{margin:8px 0 0 18px; font-size:12px; color:#d7dcee; line-height:1.4}

/* ============== CONTROLES DA CÂMERA ============== */
.camgrid{
  display:grid; grid-template-columns:repeat(3,48px); gap:8px;
}
.camgrid button{
  height:40px; border-radius:10px; background:#283049;
  border:1px solid #2f364b; color:#eaeefc; font-size:16px; cursor:pointer
}
.camgrid button:active{transform:translateY(1px)}

/* Range */
input[type="range"]{
  width:160px; accent-color:#0e61ff;
}

/* Botões */
.btn{
  padding:10px 12px; border-radius:10px; background:#0e61ff;
  border:none; color:#fff; cursor:pointer; font-size:14px
}
.btn:active{transform:translateY(1px)}

/* ============== TESTES ============== */
.tester{
  position:fixed; left:16px; bottom:16px;
  background:linear-gradient(180deg,var(--panel),var(--panel-2));
  border:1px solid var(--border);
  border-radius:12px; padding:10px 12px; max-width:520px; box-shadow:var(--shadow)
}
.tester h4{margin:0 0 6px; font-size:12px; color:var(--muted-2)}
.tests{font-size:11px; line-height:1.5}
.tests .ok{color:var(--ok)}
.tests .bad{color:var(--bad)}

/* ============== RODAPÉ ============== */
.footer{
  position:fixed; right:16px; bottom:16px; font-size:11px; color:var(--muted);
  background:rgba(0,0,0,.35); padding:6px 10px; border-radius:10px
}

/* ============== LABELS 2D / TOOLTIP ============== */
.lbl{
  font-size:11px; padding:4px 6px; border-radius:8px;
  background:#1a1f2b; color:#fff; border:1px solid rgba(255,255,255,.12);
  box-shadow:0 4px 18px rgba(0,0,0,.35)
}
#tooltip{
  position:fixed; left:0; top:0; transform:translate(-9999px,-9999px);
  background:#1a1f2b; color:#fff; font-size:12px; padding:6px 8px;
  border:1px solid rgba(255,255,255,.12); border-radius:8px;
  box-shadow:0 8px 24px rgba(0,0,0,.45); pointer-events:none; opacity:0;
  transition:opacity .15s ease
}
#tooltip.visible{opacity:1}

/* ============== RESPONSIVO/IPAD ============== */
@media (pointer:coarse) {
  .topbar{left:12px; top:12px}
  .panel{right:12px; top:12px; width:400px}
  .panel.sustain{right:12px; bottom:12px; width:440px}
  .camgrid{grid-template-columns:repeat(3,56px); gap:10px}
  .camgrid button{height:48px; font-size:18px}
  .btn{padding:12px 14px; font-size:16px}
  input[type="range"]{width:190px}
}

@media (max-width: 1100px){
  .panel{width:340px}
  .panel.sustain{width:360px}
}

@media (max-width: 920px){
  .panel{right:12px; top:12px; width:calc(100% - 24px)}
  .panel.sustain{left:12px; right:12px; width:auto}
  .topbar{left:12px; right:12px; max-width:none}
}
